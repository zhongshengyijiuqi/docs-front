(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{485:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i(88),i(89),i(17),i(116),i(28),i(36),i(154),i(40),i(41);var s=i(90);function a(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Object(s.a)(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,r=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){l=!0,c=e},f:function(){try{r||null==i.return||i.return()}finally{if(l)throw c}}}}},515:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAnElEQVQ4T+2TsQkCQRBF39yduX2soXWYWICxydVwNUwi2IGxJdiBYAPGhiKCNzuCcCCsssJe6KTz//sw/BEKRwr9vAB1e1LwNUiD44gc7H5bsp1fcgED4AE072JHjrHyFcI1gXjVM92d6bo4ADyX9GG/Nw2LEkA0DXUJANMgf8CIN0iKlO+F96azSVrlvBPwHmRjGtpxnumn0C+iJ/0RSBEp753qAAAAAElFTkSuQmCC"},565:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAI5JREFUOE9jZKAQMFKonwHFgANHTns62Jhux2couhq4ASAJBgbGbQz/GcIcbE1WYzPkwOEzoQyMDKsYGP57wSxCdQFMARZD4JrR5DDCAJtCXJpBrsQaiMgawF4BORuH13DGAsK/DAz4woU2BlDkBYoCEV9oE4xGfJphiQqbGoyEhCsVIhuCrIa6mYmcnAkAV810EZmJGs8AAAAASUVORK5CYII="},566:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAA3VJREFUSEvFlk1oHVUUx///+4JCwA8EF21BChV1pZYs2kLVdlOJoogfReymqPhRi2Iz98wLKI2ovJk7QwJFKxZ0oUTwqwVThdKFom5cZGH9gNaFC21VLEi1gWjy7pEJLyEzeXPfa7vIXb77P+d3zrnvnDnEKh2uEhd9g51zDwHYBGBIVdeSXFMEraq/kTyjqkcHBgamRkZGTvWTTE9wq9XaZoxpkryzH4cAEu990mw2z4X0QbBzLgMQ9QlcLvuOZGKtfa/OthbsnPsAQFHeiz6q+lIcx2PdHHQF94Kq6p8kfwFwFYANocjq4CvAfUBLWeR5fpP33gJ4tC6AbvASOEmSrcaYrwIOdsRxfLzbfZIkw8aYz2ps50lutNZ+v3hfAjvnDgJ4usY4EZHRUFmdc28CeKJGk4tIUZmFswROkuQ6Y8yJzrutsCW52Vr7TQic5/lW731dxc6q6sY4jn+tgh8xxkwGHK8Rkd9D4PHx8XXz8/MLjrsd7/2uZrO50GJLGTvnXgbwQp1Ru92+ZnR09K8QeGJi4uq5ubmQ5hURebEEzrLsE1W9J+D4YRF5PwRO0/Q+kkfqNCSnrLX3VjM+DWBtwOiAtfa5HuCEZBzQnBGRdVXw3wCuCBj9YIzZGUXRj3Ua59wxADsCPv4RkStL4DRNT5K8IZQRgFp4r8FT+FXVU3Ec31jN+HMA2+rAnTF5bQFX1clGo3Gk3W6fJ7mlM9OLuf4vgMsDwX8hItur4GcAvFY1InmM5KEoig4XvU7yIMm7l+tU9VNV3TM4OPjH7Ozs86q6j2QRZPXsFZHXq//qm1X12+VKko9ba9+qWud5PuS9Hyp+N8ZMR1E0vVzjnNvQge+p+LvFWlsMqfIG4pz7CMADHfFOEfmwx5sHr51zbwB4qiP6WEQeXDSozurbAHwJYOktLgXcarXWNxqNnzs+bheRpXHa7bN4gOT11tq7LgW6aJtl2duqel5Eni2VvZvzNE1/InlcREpvdKGBOOeKL91uESmWxNIJrT5fF60jIk9eKLDQZ1m2X1WHRWRzN/tey96rAO5Q1cfiOD7ZTwBpmt4PYJLkO6Gge663aZpuJynFt5TkuyQPz8zMTI+Njf1XaaHdAPYDWE9yV2jDXNFOoYyyLNvkvR8mOQzgVgCXVXp0SlUPicjRfirTM+N+nFyMZtXA/wP3U2cuf4BTJwAAAABJRU5ErkJggg=="},567:function(e,t,i){},730:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABNElEQVQ4T62TP0uCURSHn3tvRDQIQVAfIXlLHBwaEyL6AgZtNbWE2RDU2NIUJBoFDY0NLY2uBW21RKgNgQb927LIxd57TxgkVq9i2R0P5zz3d87vHEWXTwXWz5X6ekLVdUHPg/QDOWveUmxF777nBwLMUvEQcYnmZIGS84mw4702x38Clq9ixtqzIGUCKy7jbbYFmFRxFucOWoxmz2a8hfYKFi9jRuu/K6jTu5tBndCtC6zeDFB9sGTHXz76TeR7GTKDbI/ct7cxWRg1yBowI3DrdC1OpfJoQsNH4KaBUzQbNu3lPkENG00yv48wh6IREygr1DXI5JeflTq3NX+K3chTE6DgQII3M8BTJXrCz4ZPmhXIb85CaRf302PH/wfQycKFQiIdqRD1bI2Kkg6XO+65Ffgdjjp+ETqKmX4AAAAASUVORK5CYII="},731:function(e,t,i){"use strict";i(567)},750:function(e,t,i){"use strict";i.r(t);var s=i(485),a=i(83),n=(i(150),i(243),i(56),i(17),i(244),i(245),i(111),i(151),i(112),i(148),i(149),i(247),{name:"YyOrganization",props:{title:{type:String,default:"组织架构"},tabs:{type:Array,default:function(){return[]}},activeTab:{type:Number,default:1},departmentList:{type:Array,default:function(){return[]}},memberList:{type:Array,default:function(){return[]}},isOpen:{type:Boolean,default:!1},isSingleCheck:{type:Boolean,default:!1},checkedIds:{type:Array,default:function(){return[]}}},data:function(){return{isAll:!1,expandedKeys:[],defaultCheckedKeys:[],defaultProps:{children:"children",label:"name",disabled:"disabled"},selectName:"",tab_active:0,checkedList:[],allListByKeys:[],departmentListByKeys:[],renderTreeList:[],cloneTreeList:[]}},computed:{isHalf:function(){return this.checkedList.length&&!this.isAll}},watch:{isOpen:{handler:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var i,a,n,c,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isOpen){t.next=2;break}return t.abrupt("return");case 2:if(e.changeTab(e.activeTab),e.checkedIds.length){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.$nextTick();case 7:if(1===e.tab_active){i=e.allListByKeys.filter((function(t){return e.checkedIds.includes(t.id)})),e.defaultCheckedKeys=i.map((function(e){return e.key})),e.checkedList=[],a={},n=Object(s.a)(i);try{for(n.s();!(c=n.n()).done;)r=c.value,a[r.id]||(e.checkedList.push(r),a[r.id]=!0)}catch(e){n.e(e)}finally{n.f()}}else e.checkedList=e.allListByKeys.filter((function(t){return e.checkedIds.includes(t.id)})),e.defaultCheckedKeys=e.checkedList.map((function(e){return e.key}));case 8:case"end":return t.stop()}}),t)})))()},immediate:!0}},methods:{checkAll:function(){var e,t=Object(s.a)(this.allListByKeys);try{for(t.s();!(e=t.n()).done;){var i=e.value;this.$refs.tree.setChecked(i.key,!this.isAll)}}catch(e){t.e(e)}finally{t.f()}if(this.isAll){if(this.checkedList=[],2!==this.tab_active){var a,n=Object(s.a)(this.departmentListByKeys);try{for(n.s();!(a=n.n()).done;){var c=a.value;this.$refs.tree.setChecked(c.key,!1)}}catch(e){n.e(e)}finally{n.f()}}}else if(1===this.tab_active){var r,l=Object(s.a)(this.departmentListByKeys);try{for(l.s();!(r=l.n()).done;){var d=r.value;this.$refs.tree.setChecked(d.key,!0)}}catch(e){l.e(e)}finally{l.f()}this.checkedList=[];var h,o={},f=Object(s.a)(this.allListByKeys);try{for(f.s();!(h=f.n()).done;){var u=h.value;o[u.id]||(this.checkedList.push(u),o[u.id]=!0)}}catch(e){f.e(e)}finally{f.f()}}else if(2===this.tab_active)this.checkedList=JSON.parse(JSON.stringify(this.allListByKeys));else if(3===this.tab_active){var v,y=Object(s.a)(this.departmentListByKeys);try{for(y.s();!(v=y.n()).done;){var p=v.value;this.$refs.tree.setChecked(p.key,!0)}}catch(e){y.e(e)}finally{y.f()}this.checkedList=JSON.parse(JSON.stringify(this.allListByKeys))}this.isAll=!this.isAll},checkNode:function(e,t){var i=this;if(this.isSingleCheck){if(this.$refs.tree.getNode(e.key).checked){if(1===this.tab_active){var a,n=this.allListByKeys.filter((function(t){return t.id===e.id})).map((function(e){return e.key})),c=Object(s.a)(n);try{for(c.s();!(a=c.n()).done;){var r=a.value;this.$refs.tree.setChecked(r,!0)}}catch(e){c.e(e)}finally{c.f()}if(this.checkedList.length){var l,d=this.allListByKeys.filter((function(e){return e.id===i.checkedList[0].id})).map((function(e){return e.key})),h=Object(s.a)(d);try{for(h.s();!(l=h.n()).done;){var o=l.value;this.$refs.tree.setChecked(o,!1)}}catch(e){h.e(e)}finally{h.f()}}}else{var f,u=Object(s.a)(this.checkedList);try{for(u.s();!(f=u.n()).done;){var v=f.value;this.$refs.tree.setChecked(v.key,!1)}}catch(e){u.e(e)}finally{u.f()}}this.checkedList=[e]}else{if(1===this.tab_active){if(this.checkedList.length){var y,p=this.allListByKeys.filter((function(e){return e.id===i.checkedList[0].id})).map((function(e){return e.key})),k=Object(s.a)(p);try{for(k.s();!(y=k.n()).done;){var A=y.value;this.$refs.tree.setChecked(A,!1)}}catch(e){k.e(e)}finally{k.f()}}}else this.$refs.tree.setChecked(e.key,!1);this.checkedList=[]}}else{if(1===this.tab_active){var m=this.$refs.tree.getNode(e.key).checked;if(!e.children){var b,g=this.allListByKeys.filter((function(t){return t.id===e.id})).map((function(e){return e.key})),C=Object(s.a)(g);try{for(C.s();!(b=C.n()).done;){var L=b.value;this.$refs.tree.setChecked(L,m)}}catch(e){C.e(e)}finally{C.f()}}this.checkedList=[];var N,O=this.$refs.tree.getCheckedNodes().filter((function(e){return!e.children})),K={},_=Object(s.a)(O);try{for(_.s();!(N=_.n()).done;){var B=N.value;K[B.id]||(this.checkedList.push(B),K[B.id]=!0)}}catch(e){_.e(e)}finally{_.f()}}else 2===this.tab_active?this.checkedList=t.checkedNodes:3===this.tab_active&&(this.checkedList=t.checkedNodes.filter((function(e){return!e.children})));var E=this.$refs.tree.getCheckedKeys();2===this.tab_active?this.isAll=E.length===this.allListByKeys.length:this.isAll=E.length===this.allListByKeys.length+this.departmentListByKeys.length}},delCheckedNode:function(e){if(this.isAll=!1,this.checkedList=this.checkedList.filter((function(t){return t.key!==e.key})),1===this.tab_active){var t,i=this.allListByKeys.filter((function(t){return t.id===e.id})),a=Object(s.a)(i);try{for(a.s();!(t=a.n()).done;){var n=t.value;this.$refs.tree.setChecked(n.key,!1)}}catch(e){a.e(e)}finally{a.f()}}else this.$refs.tree.setChecked(e.key,!1)},filterNode:function(e,t){return!e||t.name.includes(e)},search:function(){this.$refs.tree.filter(this.selectName)},close:function(){this.$emit("close")},confirm:function(){this.$emit("confirm",{checkedType:this.tab_active,checkedList:this.checkedList})},changeTab:function(e){this.tab_active!==e&&(this.tab_active=e,this.initData(),1===this.tab_active&&this.spliceMemberTree(),2===this.tab_active&&this.spliceDepartmentTree(),3===this.tab_active&&this.splicePostTree(),this.expandFirstLevel())},initData:function(){this.isAll=!1,this.defaultCheckedKeys=[],this.checkedList=[],this.selectName=""},imgErrorhandler:function(e){e.target.src=i(566)},expandFirstLevel:function(){this.expandedKeys=this.cloneTreeList.map((function(e){return e.key}))},spliceDepartmentTree:function(){var e=this.departmentList.map((function(e){return{key:e.id,id:e.id,name:e.name,parentId:e.parentId,disabled:!1}}));this.allListByKeys=JSON.parse(JSON.stringify(e));var t=[];e.forEach((function(i){i.children=[],i.parentId||t.push(i),e.forEach((function(e){e.parentId===i.id&&i.children.push(e)}))})),this.renderTreeList=JSON.parse(JSON.stringify(t)),this.cloneTreeList=JSON.parse(JSON.stringify(t))},splicePostTree:function(){var e=this;this.allListByKeys=[],this.departmentListByKeys=[];var t=JSON.parse(JSON.stringify(this.departmentList.map((function(t){var i={key:t.id,id:t.id,name:t.name,parentId:t.parentId,disabled:!!e.isSingleCheck};return e.departmentListByKeys.push(i),{key:t.id,id:t.id,name:t.name,parentId:t.parentId,children:t.positions.map((function(i){var s={key:"".concat(t.id,"-").concat(i.id),keyName:"".concat(t.name,"-").concat(i.name),id:i.id,name:i.name,disabled:!1};return e.allListByKeys.push(s),s})),disabled:!!e.isSingleCheck}})))),i=[];t.forEach((function(e){e.parentId||i.push(e),t.forEach((function(t){t.parentId===e.id&&e.children.push(t)}))})),this.renderTreeList=JSON.parse(JSON.stringify(i)),this.cloneTreeList=JSON.parse(JSON.stringify(i))},spliceMemberTree:function(){var e=this;this.allListByKeys=[],this.departmentListByKeys=[];var t=JSON.parse(JSON.stringify(this.departmentList)),i=this.memberList.map((function(e){return{key:e.id,id:e.id,name:e.name,icon:e.profilePicture,deptIdList:e.deptIdList||[],disabled:!1}})),s=[];t.length?(i.forEach((function(t){t.deptIdList.length||(s.push(t),e.allListByKeys.push(t))})),t.forEach((function(a){a.key=a.id,a.children=[],a.disabled=!!e.isSingleCheck,e.departmentListByKeys.push(a),i.forEach((function(t){t.deptIdList.length&&t.deptIdList.forEach((function(i){if(i==a.id){var s={key:"".concat(a.id,"-").concat(t.id),id:t.id,name:t.name,icon:t.icon,disabled:t.disabled};a.children.push(s),e.allListByKeys.push(s)}}))})),t.forEach((function(e){e.parentId===a.id&&a.children.push(e)})),a.parentId||s.push(a)}))):(s=i,this.allListByKeys=i),this.renderTreeList=JSON.parse(JSON.stringify(s)),this.cloneTreeList=JSON.parse(JSON.stringify(s))}}}),c=(i(731),i(80)),r=Object(c.a)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],ref:"organization",staticClass:"organization-mask"},[s("div",{staticClass:"organization-container"},[s("div",{staticClass:"container-head"},[s("p",{staticClass:"head-title"},[e._v(e._s(e.title))]),e._v(" "),s("img",{staticClass:"icon-close",attrs:{src:i(565)},on:{click:e.close}})]),e._v(" "),s("div",{staticClass:"container-main"},[s("div",{staticClass:"main-left"},[s("div",{staticClass:"search-container"},[s("el-input",{attrs:{size:"medium",placeholder:"请输入关键词","prefix-icon":"el-icon-search",maxlength:"20"},on:{input:e.search},model:{value:e.selectName,callback:function(t){e.selectName="string"==typeof t?t.trim():t},expression:"selectName"}})],1),e._v(" "),e.tabs.length?s("div",{staticClass:"tabs-container"},[e.tabs.includes(1)?s("div",{class:{"tab-option":!0,"tab-active":1===e.tab_active},on:{click:function(t){return e.changeTab(1)}}},[e._v("\n            按部门-成员\n          ")]):e._e(),e._v(" "),e.tabs.includes(2)?s("div",{class:{"tab-option":!0,"tab-active":2===e.tab_active},on:{click:function(t){return e.changeTab(2)}}},[e._v("\n            按部门\n          ")]):e._e(),e._v(" "),e.tabs.includes(3)?s("div",{class:{"tab-option":!0,"tab-active":3===e.tab_active},on:{click:function(t){return e.changeTab(3)}}},[e._v("\n            按部门-岗位\n          ")]):e._e()]):e._e(),e._v(" "),s("div",{staticClass:"tree-container"},[e.isSingleCheck?e._e():s("div",{staticClass:"checkbox",on:{click:e.checkAll}},[s("div",{class:["checkbox-icon",e.isAll?"is-all":e.isHalf?"is-half":"is-empty"]}),e._v(" "),s("div",{class:["checkbox-label",e.isAll?"is-active":"is-normal"]},[e._v("\n              全选\n            ")])]),e._v(" "),s("el-tree",{ref:"tree",class:[e.isSingleCheck?"tree-singleCheck":"tree-multipleCheck"],attrs:{data:e.renderTreeList,"node-key":"key","show-checkbox":"",props:e.defaultProps,"check-on-click-node":"","expand-on-click-node":!1,"default-expanded-keys":e.expandedKeys,"default-checked-keys":e.defaultCheckedKeys,"check-strictly":2===e.tab_active,"filter-node-method":e.filterNode},on:{check:e.checkNode},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var a=t.data;return s("div",{staticClass:"tree-node-custom"},[1===e.tab_active?s("div",{staticClass:"node-container"},[a.children?s("div",{staticClass:"node-department"},[s("img",{staticClass:"department-icon",attrs:{src:i(515)}}),e._v(" "),s("div",{staticClass:"department-name"},[e._v(e._s(a.name))])]):s("div",{staticClass:"node-member"},[s("img",{staticClass:"member-icon",attrs:{src:a.icon||i(566),alt:"avatar"},on:{error:e.imgErrorhandler}}),e._v(" "),s("div",{staticClass:"member-name"},[e._v(e._s(a.name))])])]):e._e(),e._v(" "),2===e.tab_active?s("div",{staticClass:"node-container"},[s("div",{staticClass:"node-department"},[s("img",{staticClass:"department-icon",attrs:{src:i(515)}}),e._v(" "),s("div",{staticClass:"department-name"},[e._v(e._s(a.name))])])]):e._e(),e._v(" "),3===e.tab_active?s("div",{staticClass:"node-container"},[s("div",{staticClass:"node-department"},[s("img",{staticClass:"department-icon",attrs:{src:a.children?i(515):i(730),alt:""}}),e._v(" "),s("div",{staticClass:"department-name"},[e._v(e._s(a.name))])])]):e._e()])}}])})],1)]),e._v(" "),s("div",{staticClass:"main-right"},[s("div",{staticClass:"checked-tip"},[e._v("已选："+e._s(e.checkedList.length)+"个")]),e._v(" "),s("div",{staticClass:"checked-container"},[s("div",{staticClass:"checked-option"},e._l(e.checkedList,(function(t,a){return s("div",{key:a,staticClass:"member"},[s("p",{staticClass:"name"},[e._v("\n                "+e._s(3===e.tab_active?t.keyName:t.name)+"\n              ")]),e._v(" "),s("img",{staticClass:"close",attrs:{src:i(565)},on:{click:function(i){return e.delCheckedNode(t)}}})])})),0)])])]),e._v(" "),s("div",{staticClass:"container-foot"},[s("button",{staticClass:"cancel",on:{click:e.close}},[e._v("取消")]),e._v(" "),s("button",{staticClass:"confirm",on:{click:e.confirm}},[e._v("确定")])])])])}),[],!1,null,"17d4236e",null);t.default=r.exports}}]);