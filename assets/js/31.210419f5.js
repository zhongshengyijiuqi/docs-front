(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{485:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));i(88),i(89),i(17),i(116),i(28),i(36),i(154),i(40),i(41);var n=i(90);function s(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Object(n.a)(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var s=0,c=function(){};return{s:c,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,d=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){d=!0,a=e},f:function(){try{r||null==i.return||i.return()}finally{if(d)throw a}}}}},486:function(e,t,i){},508:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAI5JREFUOE9jZKAQMFKonwHFgANHTns62Jhux2couhq4ASAJBgbGbQz/GcIcbE1WYzPkwOEzoQyMDKsYGP57wSxCdQFMARZD4JrR5DDCAJtCXJpBrsQaiMgawF4BORuH13DGAsK/DAz4woU2BlDkBYoCEV9oE4xGfJphiQqbGoyEhCsVIhuCrIa6mYmcnAkAV810EZmJGs8AAAAASUVORK5CYII="},509:function(e,t,i){"use strict";i(486)},582:function(e,t,i){"use strict";i.r(t);var n=i(83),s=i(485),c=(i(150),i(56),i(17),i(244),i(245),i(111),i(112),i(151),{name:"yyLevelModel",props:{title:{type:String,default:"企业模型"},data:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1},isSingleCheck:{type:Boolean,default:!1},checkedIds:{type:Array,default:function(){return[]}},disabledIds:{type:Array,default:function(){return[]}},visibleNodeTypes:{type:Array,default:function(){return[2,3,4,5]}},isNeedCheckAll:{type:Boolean,default:!0}},data:function(){return{enterpriseName:"",selectName:"",renderTreeList:[],checkedNodes:[],expandedKeys:[],checkedKeys:[],defaultProps:{children:"children",label:"name",disabled:"disabled"}}},watch:{visible:{handler:function(){var e=this;this.visible&&(this.checkedKeys=this.checkedIds,this.checkedNodes=this.data.filter((function(t){return e.checkedIds.includes(t.id)})),this.spliceLevelModel())},immediate:!0}},methods:{spliceLevelModel:function(){var e=this,t=this.data.map((function(t){return{id:t.id,name:t.name,parentId:t.parentId,type:t.type,disabled:e.disabledIds.includes(t.id),children:[]}})),i=t.filter((function(e){return!e.parentId}))[0];this.enterpriseName=i.name;var n,c=t.filter((function(t){return e.visibleNodeTypes.includes(t.type)})),a=[],r=Object(s.a)(c);try{for(r.s();!(n=r.n()).done;){var d=n.value;this.expandedKeys.push(d.id),a.push(d);var l,o=Object(s.a)(c);try{for(o.s();!(l=o.n()).done;){var u=l.value;u.parentId===d.id&&(u.isDelete=!0,d.children.push(u))}}catch(e){o.e(e)}finally{o.f()}}}catch(e){r.e(e)}finally{r.f()}a=a.filter((function(e){return!e.isDelete})),this.expandedKeys=a.map((function(e){return e.id})),this.renderTreeList=a},search:function(){this.$refs.tree.filter(this.selectName)},filterNode:function(e,t){return!e||t.name.includes(e)},checkNode:function(e,t){var i=this;return Object(n.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!i.isSingleCheck){n.next=14;break}if(i.$refs.tree.getNode(e.id).checked){n.next=7;break}i.checkedKeys=[],i.checkedNodes=[],n.next=12;break;case 7:return i.checkedKeys=[e.id],i.checkedNodes=[e],n.next=11,i.$nextTick();case 11:i.$refs.tree.setCheckedKeys([e.id]);case 12:n.next=16;break;case 14:i.checkedKeys=t.checkedKeys,i.checkedNodes=t.checkedNodes;case 16:case"end":return n.stop()}}),n)})))()},setCheckedAll:function(){var e=this;this.checkedKeys=this.data.filter((function(t){return t.parentId&&!e.disabledIds.includes(t.id)})).map((function(e){return e.id})),this.checkedNodes=JSON.parse(JSON.stringify(this.data)).filter((function(t){return t.parentId&&!e.disabledIds.includes(t.id)}))},delChecked:function(e){this.checkedNodes=this.checkedNodes.filter((function(t){return t.id!==e.id})),this.checkedKeys=this.checkedKeys.filter((function(t){return t!==e.id})),this.$refs.tree.setCheckedKeys(this.checkedKeys)},close:function(){this.$emit("close")},confirm:function(){this.$emit("confirm",this.checkedNodes)}}}),a=(i(509),i(80)),r=Object(a.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("div",{staticClass:"levelModel-mask"},[n("div",{staticClass:"levelModel-container"},[n("div",{staticClass:"container-head"},[n("p",{staticClass:"head-title"},[e._v(e._s(e.title))]),e._v(" "),n("img",{staticClass:"icon-close",attrs:{src:i(508)},on:{click:e.close}})]),e._v(" "),n("div",{staticClass:"container-main"},[n("div",{staticClass:"main-left"},[n("div",{staticClass:"search-container"},[n("el-input",{attrs:{size:"medium",placeholder:"请输入关键词","prefix-icon":"el-icon-search",maxlength:"20"},on:{input:e.search},model:{value:e.selectName,callback:function(t){e.selectName=t},expression:"selectName"}})],1),e._v(" "),n("div",{staticClass:"tree-container"},[n("div",{staticClass:"levelModel-enterprise"},[n("p",{staticClass:"enterprise-name"},[e._v(e._s(e.enterpriseName))]),e._v(" "),!e.isSingleCheck&&e.isNeedCheckAll?n("p",{staticClass:"btn-selectAll",on:{click:e.setCheckedAll}},[e._v("\n              全选\n            ")]):e._e()]),e._v(" "),n("el-tree",{ref:"tree",class:[e.isSingleCheck?"tree-singleCheck":"tree-multipleCheck"],attrs:{data:e.renderTreeList,"node-key":"id","show-checkbox":"","check-strictly":"","check-on-click-node":"","expand-on-click-node":!1,"default-expanded-keys":e.expandedKeys,"default-checked-keys":e.checkedKeys,props:e.defaultProps,"filter-node-method":e.filterNode},on:{check:e.checkNode},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,s=t.data;return n("div",{staticClass:"tree-node-custom"},[n("div",{staticClass:"levelModel-node"},[n("div",{staticClass:"levelModel-node-left"},[n("div",{class:["icon",e.checkedKeys.includes(s.id)?"level"+s.type+"-active":"level"+s.type]}),e._v(" "),n("p",{class:[e.checkedKeys.includes(s.id)?"name-active":"name"]},[e._v("\n                    "+e._s(i.label)+"\n                  ")])])])])}}],null,!1,4257770606)})],1)]),e._v(" "),n("div",{staticClass:"main-right"},[n("div",{staticClass:"checked-tip"},[e._v("已选："+e._s(e.checkedNodes.length)+"个")]),e._v(" "),n("div",{staticClass:"checked-container"},e._l(e.checkedNodes,(function(t){return n("div",{key:t.id,staticClass:"checked-option"},[n("div",{staticClass:"checked-label"},[n("div",{class:["icon","level"+t.type+"-active"]}),e._v(" "),n("p",{staticClass:"name"},[e._v(e._s(t.name))])]),e._v(" "),n("div",{staticClass:"btn-del",on:{click:function(i){return e.delChecked(t)}}},[e._v("移除")])])})),0)])]),e._v(" "),n("div",{staticClass:"container-foot"},[n("button",{staticClass:"cancel",on:{click:e.close}},[e._v("取消")]),e._v(" "),n("button",{staticClass:"confirm",on:{click:e.confirm}},[e._v("确定")])])])]):e._e()}),[],!1,null,"16411378",null);t.default=r.exports}}]);