(window.webpackJsonp=window.webpackJsonp||[]).push([[22,31],{485:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n(88),n(89),n(17),n(116),n(28),n(36),n(154),n(40),n(41);var i=n(90);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Object(i.a)(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var d=0,a=function(){};return{s:a,n:function(){return d>=e.length?{done:!0}:{done:!1,value:e[d++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,c=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){r=!0,s=e},f:function(){try{c||null==n.return||n.return()}finally{if(r)throw s}}}}},486:function(e,t,n){},508:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAI5JREFUOE9jZKAQMFKonwHFgANHTns62Jhux2couhq4ASAJBgbGbQz/GcIcbE1WYzPkwOEzoQyMDKsYGP57wSxCdQFMARZD4JrR5DDCAJtCXJpBrsQaiMgawF4BORuH13DGAsK/DAz4woU2BlDkBYoCEV9oE4xGfJphiQqbGoyEhCsVIhuCrIa6mYmcnAkAV810EZmJGs8AAAAASUVORK5CYII="},509:function(e,t,n){"use strict";n(486)},561:function(e,t,n){},582:function(e,t,n){"use strict";n.r(t);var i=n(83),d=n(485),a=(n(150),n(56),n(17),n(244),n(245),n(111),n(112),n(151),{name:"yyLevelModel",props:{title:{type:String,default:"企业模型"},data:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1},isSingleCheck:{type:Boolean,default:!1},checkedIds:{type:Array,default:function(){return[]}},disabledIds:{type:Array,default:function(){return[]}},visibleNodeTypes:{type:Array,default:function(){return[2,3,4,5]}},isNeedCheckAll:{type:Boolean,default:!0}},data:function(){return{enterpriseName:"",selectName:"",renderTreeList:[],checkedNodes:[],expandedKeys:[],checkedKeys:[],defaultProps:{children:"children",label:"name",disabled:"disabled"}}},watch:{visible:{handler:function(){var e=this;this.visible&&(this.checkedKeys=this.checkedIds,this.checkedNodes=this.data.filter((function(t){return e.checkedIds.includes(t.id)})),this.spliceLevelModel())},immediate:!0}},methods:{spliceLevelModel:function(){var e=this,t=this.data.map((function(t){return{id:t.id,name:t.name,parentId:t.parentId,type:t.type,disabled:e.disabledIds.includes(t.id),children:[]}})),n=t.filter((function(e){return!e.parentId}))[0];this.enterpriseName=n.name;var i,a=t.filter((function(t){return e.visibleNodeTypes.includes(t.type)})),s=[],c=Object(d.a)(a);try{for(c.s();!(i=c.n()).done;){var r=i.value;this.expandedKeys.push(r.id),s.push(r);var l,o=Object(d.a)(a);try{for(o.s();!(l=o.n()).done;){var p=l.value;p.parentId===r.id&&(p.isDelete=!0,r.children.push(p))}}catch(e){o.e(e)}finally{o.f()}}}catch(e){c.e(e)}finally{c.f()}s=s.filter((function(e){return!e.isDelete})),this.expandedKeys=s.map((function(e){return e.id})),this.renderTreeList=s},search:function(){this.$refs.tree.filter(this.selectName)},filterNode:function(e,t){return!e||t.name.includes(e)},checkNode:function(e,t){var n=this;return Object(i.a)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!n.isSingleCheck){i.next=14;break}if(n.$refs.tree.getNode(e.id).checked){i.next=7;break}n.checkedKeys=[],n.checkedNodes=[],i.next=12;break;case 7:return n.checkedKeys=[e.id],n.checkedNodes=[e],i.next=11,n.$nextTick();case 11:n.$refs.tree.setCheckedKeys([e.id]);case 12:i.next=16;break;case 14:n.checkedKeys=t.checkedKeys,n.checkedNodes=t.checkedNodes;case 16:case"end":return i.stop()}}),i)})))()},setCheckedAll:function(){var e=this;this.checkedKeys=this.data.filter((function(t){return t.parentId&&!e.disabledIds.includes(t.id)})).map((function(e){return e.id})),this.checkedNodes=JSON.parse(JSON.stringify(this.data)).filter((function(t){return t.parentId&&!e.disabledIds.includes(t.id)}))},delChecked:function(e){this.checkedNodes=this.checkedNodes.filter((function(t){return t.id!==e.id})),this.checkedKeys=this.checkedKeys.filter((function(t){return t!==e.id})),this.$refs.tree.setCheckedKeys(this.checkedKeys)},close:function(){this.$emit("close")},confirm:function(){this.$emit("confirm",this.checkedNodes)}}}),s=(n(509),n(80)),c=Object(s.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.visible?i("div",{staticClass:"levelModel-mask"},[i("div",{staticClass:"levelModel-container"},[i("div",{staticClass:"container-head"},[i("p",{staticClass:"head-title"},[e._v(e._s(e.title))]),e._v(" "),i("img",{staticClass:"icon-close",attrs:{src:n(508)},on:{click:e.close}})]),e._v(" "),i("div",{staticClass:"container-main"},[i("div",{staticClass:"main-left"},[i("div",{staticClass:"search-container"},[i("el-input",{attrs:{size:"medium",placeholder:"请输入关键词","prefix-icon":"el-icon-search",maxlength:"20"},on:{input:e.search},model:{value:e.selectName,callback:function(t){e.selectName=t},expression:"selectName"}})],1),e._v(" "),i("div",{staticClass:"tree-container"},[i("div",{staticClass:"levelModel-enterprise"},[i("p",{staticClass:"enterprise-name"},[e._v(e._s(e.enterpriseName))]),e._v(" "),!e.isSingleCheck&&e.isNeedCheckAll?i("p",{staticClass:"btn-selectAll",on:{click:e.setCheckedAll}},[e._v("\n              全选\n            ")]):e._e()]),e._v(" "),i("el-tree",{ref:"tree",class:[e.isSingleCheck?"tree-singleCheck":"tree-multipleCheck"],attrs:{data:e.renderTreeList,"node-key":"id","show-checkbox":"","check-strictly":"","check-on-click-node":"","expand-on-click-node":!1,"default-expanded-keys":e.expandedKeys,"default-checked-keys":e.checkedKeys,props:e.defaultProps,"filter-node-method":e.filterNode},on:{check:e.checkNode},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,d=t.data;return i("div",{staticClass:"tree-node-custom"},[i("div",{staticClass:"levelModel-node"},[i("div",{staticClass:"levelModel-node-left"},[i("div",{class:["icon",e.checkedKeys.includes(d.id)?"level"+d.type+"-active":"level"+d.type]}),e._v(" "),i("p",{class:[e.checkedKeys.includes(d.id)?"name-active":"name"]},[e._v("\n                    "+e._s(n.label)+"\n                  ")])])])])}}],null,!1,4257770606)})],1)]),e._v(" "),i("div",{staticClass:"main-right"},[i("div",{staticClass:"checked-tip"},[e._v("已选："+e._s(e.checkedNodes.length)+"个")]),e._v(" "),i("div",{staticClass:"checked-container"},e._l(e.checkedNodes,(function(t){return i("div",{key:t.id,staticClass:"checked-option"},[i("div",{staticClass:"checked-label"},[i("div",{class:["icon","level"+t.type+"-active"]}),e._v(" "),i("p",{staticClass:"name"},[e._v(e._s(t.name))])]),e._v(" "),i("div",{staticClass:"btn-del",on:{click:function(n){return e.delChecked(t)}}},[e._v("移除")])])})),0)])]),e._v(" "),i("div",{staticClass:"container-foot"},[i("button",{staticClass:"cancel",on:{click:e.close}},[e._v("取消")]),e._v(" "),i("button",{staticClass:"confirm",on:{click:e.confirm}},[e._v("确定")])])])]):e._e()}),[],!1,null,"16411378",null);t.default=c.exports},732:function(e,t,n){"use strict";n(561)},776:function(e,t,n){"use strict";n.r(t);var i={name:"index",components:{YyLevelModel:n(582).default},data:function(){return{visible:!1,levelModels:[{id:"H~000000Wa",name:"技术工程中心",parentId:"3ztfmkoQ51R",type:3},{id:"H~000000WZ",name:"危化品",parentId:"3ztfmkoQ51R",type:3},{id:"H~000000WY",name:"铝盖辅料2",parentId:"3qBAhtrHccw",type:5},{id:"H~000000WX",name:"铝带辅料区",parentId:"3qBAbKPtuPV",type:4},{id:"H~000000WW",name:"模具暂存区",parentId:"3w5fmqnU6dV",type:4},{id:"H~000000WV",name:"铝盖冲压区",parentId:"3w5fmqnU6dV",type:4},{id:"H~000000WU",name:"铝盖滚花区",parentId:"3w5fmqnU6dV",type:4},{id:"H~000000WT",name:"冲压铝带暂存区",parentId:"3w5fmqnU6dV",type:4},{id:"H~000000WS",name:"冲压车间5",parentId:"H~000000Nj",type:5},{id:"H~000000WR",name:"冲压车间4",parentId:"H~000000Nj",type:5},{id:"H~000000WQ",name:"冲压车间3",parentId:"H~000000Nj",type:5},{id:"H~000000WP",name:"冲压车间2",parentId:"H~000000Nj",type:5},{id:"H~000000WO",name:"冲压车间1",parentId:"H~000000Nj",type:5},{id:"H~000000WN",name:"模具库",parentId:"3y3GpCNLKPM",type:4},{id:"H~000000WM",name:"亦云应用",parentId:"3qBATbRBRFd",type:2},{id:"H~000000T3",name:"电表9",parentId:"3qBAgNe2M6w",type:5},{id:"H~000000Nj",name:"冲压车间",parentId:"3y3GpCNLKPM",type:4},{id:"H~000000Ni",name:"铝带仓库区",parentId:"3w5fmqnU6dV",type:4},{id:"H~000000F0",name:"电表8",parentId:"3qBAgNe2M6w",type:5},{id:"H~000000Ez",name:"电表7",parentId:"3qBAgNe2M6w",type:5},{id:"H~000000Ey",name:"电表6",parentId:"3qBAgNe2M6w",type:5},{id:"H~000000Ex",name:"电表5",parentId:"3qBAgNe2M6w",type:5},{id:"458ePYqhD8T",name:"办公楼",parentId:"H~000000WM",type:3},{id:"3ztfmkoQ51R",name:"亦云平台",parentId:"3qBATbRBRFd",type:2},{id:"3y3GpCNLKPM",name:"二号厂房",parentId:"H~000000WM",type:3},{id:"3w5fmqnU6dV",name:"一号厂房",parentId:"H~000000WM",type:3},{id:"3r24QwSFMBm",name:"文谷",parentId:"3qBATbRBRFd",type:2},{id:"3qBAnkjo4Ph",name:"铝盖辅料1",parentId:"3qBAhtrHccw",type:5},{id:"3qBAmyjQMx3",name:"电表4",parentId:"3qBAgNe2M6w",type:5},{id:"3qBAmMnCn63",name:"电表3",parentId:"3qBAgNe2M6w",type:5},{id:"3qBAkfASTJ7",name:"电表2",parentId:"3qBAeudT2dd",type:5},{id:"3qBAk1qBYDV",name:"电表1",parentId:"3qBAeudT2dd",type:5},{id:"3qBAhtrHccw",name:"铝盖辅料区",parentId:"3qBAbKPtuPV",type:4},{id:"3qBAgNe2M6w",name:"配电间2",parentId:"3qBAZe6b3Bu",type:4},{id:"3qBAeudT2dd",name:"配电间1",parentId:"3qBAZe6b3Bu",type:4},{id:"3qBAbKPtuPV",name:"辅料仓库",parentId:"H~000000WM",type:3},{id:"3qBAZe6b3Bu",name:"配电房",parentId:"H~000000WM",type:3},{id:"3qBATbRBRFd",name:"文谷-浙江",parentId:"",type:1}]}},methods:{}},d=(n(732),n(80)),a=Object(d.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"demo"},[n("div",{staticClass:"demo-option"},[n("div",{staticClass:"demo-title"}),e._v(" "),n("el-button",{on:{click:function(t){e.visible=!0}}},[e._v("点击打开层次模型")]),e._v(" "),n("yy-levelModel",{attrs:{title:"新版层次模型",data:e.levelModels,visible:e.visible,isSingleCheck:!1,checkedIds:["44ZPFcvACBR"],disabledIds:["44ZPFcvACBR","44ZPJ4yQNpo"],visibleNodeTypes:[2,3,4,5],isNeedCheckAll:!1},on:{close:function(t){e.visible=!1},confirm:function(t){e.visible=!1}}})],1)])}),[],!1,null,"555c0c27",null);t.default=a.exports}}]);